<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.project.market.dao.AdminMapper">
	<!-- 1.페이징 -->
	<select id = "getTotalRecordsCount" resultType = "int">
 		select
 			count(*)
 		from
 			item_table
 	</select>
 	
 	<!-- 1.2.상품 리스트 불러오기 -->
 	<select id = "getItemList" resultType = "Item">
 		select distinct
 			it.item_num as itemNum,
 			it.item_name as itemName,
 			it.price as price,
 			it.item_amount as itemAmount,
 			(select distinct ct.category_name
 				from category_table ct
 				where it.category_num = ct.category_num) as categoryName
 		from
 			item_table it,
 			(select
 				rownum as rn,
 				item_num as ln
 			from
 				item_table
 			order by
 				item_num) rt
 		where
 			it.item_num = rt.ln
		and
			rt.rn between #{startRecord } + 1 and #{startRecord } + #{countPerPage }
 		order by item_num
 	</select>
</mapper>